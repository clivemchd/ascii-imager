<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image to ASCII Converter</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé®</text></svg>">
    <link rel="apple-touch-icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé®</text></svg>">
</head>

<body>
    <div id="threejs-background"></div>
    <!-- Background Removal Modal - moved outside container for proper centering -->
    <div id="backgroundRemovalLoader" class="bg-removal-loader bg-removal-modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="loader-spinner"></div>
            <p>Removing background using AI...</p>
            <small>This may take a few moments, please do not close this tab or refresh the page</small>
        </div>
    </div>
    <div class="container">
        <h1>üé® Image to ASCII Art Converter</h1>

        <div class="upload-section">
            <div class="file-input" id="fileInputArea">
                <input type="file" id="imageInput" accept="image/*" />
                <div class="upload-content">
                    <p id="uploadText">Choose an image file or drag and drop</p>
                    <div id="imageInfo" class="image-info hidden">
                        <p id="imageName"></p>
                        <p id="imageDimensions"></p>
                    </div>
                </div>
            </div>

            <div class="background-removal-section">
                <div class="control-group-vertical">
                    <label>
                        <input type="checkbox" id="removeBackground" disabled />
                        Remove Background (make transparent)
                        <span class="beta-tag">BETA</span>
                        <span class="info-icon"
                            title="The background removal process is completely private. Images are processed locally, so they never leave the user's device. The AI model runs directly in the browser using WebAssembly (WASM), so images don't need to be sent to external servers. This is possible with @imgly/background-removal">‚ìò</span>
                    </label>
                </div>

                <div id="processedImagePreview" class="processed-image-preview hidden">
                    <img id="processedImage" alt="Processed image" />
                </div>
            </div>
        </div>

        <div class="controls">
            <div id="backgroundRemovalIndicator" class="bg-removal-indicator hidden">
                <p>‚ú® Used @imgly/background-removal to remove image background</p>
            </div>

            <div class="control-row">
                <div class="control-group">
                    <label for="totalChars">Quality level (Max: 5,000,000)</label>
                    <input type="number" id="totalChars" placeholder="Leave empty for auto calculation" min="100"
                        max="5000000" style="width: 180px;" />
                    <small style="display: block; color: rgba(255, 255, 255, 0.7); font-size: 11px; margin-top: 2px;">
                        If specified, calculates optimal dimensions
                    </small>
                </div>

                <div class="control-group">
                    <label for="charsetSelect">Character Set:</label>
                    <select id="charsetSelect">
                        <option value="detailed">Detailed: @%#*+=-:. </option>
                        <option value="simple">Simple: ‚ñà‚ñâ‚ñä‚ñã‚ñå‚ñç‚ñé‚ñè </option>
                        <option value="blocks">Blocks: ‚ñà‚ñà‚ñì‚ñí‚ñë </option>
                        <option value="custom">Custom (enter your own)</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="downloadFormat">Download Format:</label>
                    <select id="downloadFormat">
                        <option value="png">PNG Image</option>
                        <option value="svg">SVG Vector</option>
                        <option value="txt">Text File</option>
                    </select>
                </div>
            </div>

            <div id="customInputGroup" class="custom-input-group hidden">
                <label for="customCharset">Custom Characters:</label>
                <input type="text" id="customCharset"
                    placeholder="Enter characters from dark to light (e.g., @#*+=-:. )" value="@#*+=-:. " />
                <small>Characters should be ordered from darkest to lightest</small>
            </div>

            <div class="control-group-vertical">
                <label>
                    <input type="checkbox" id="invertColors" />
                    Invert Colors (dark areas become light)
                </label>
            </div>

            <div class="control-group-vertical">
                <label for="textColor">Text Color:</label>
                <input type="color" id="textColor" value="#00ff88" />
            </div>

            <div class="control-group-vertical">
                <label for="backgroundColor">Background Color:</label>
                <input type="color" id="backgroundColor" value="#141619" />
            </div>

            <br>
            <button id="convertBtn">Convert to ASCII</button>
            <button id="downloadBtn" class="hidden">Download ASCII</button>
        </div>

        <div class="preview-section">
            <div id="loading" class="loading hidden">Converting image...</div>
            <div id="asciiOutput" class="ascii-output hidden"></div>
        </div>
    </div>

    <canvas id="canvas" class="hidden"></canvas>

    <script type="module" src="/src/main.js"></script>
</body>

</html>